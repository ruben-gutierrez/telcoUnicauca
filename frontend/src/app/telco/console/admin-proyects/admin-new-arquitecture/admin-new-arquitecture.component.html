


<div class="container my-5">
 
    <div class="row">
      <div class="col-4">
          <i class="fa fa-building" aria-hidden="true">Imagen</i>
      </div>
      <div class="col-8">

        <form *ngIf="!loading; else await" (ngSubmit)="createArquitecture(formNewArquitecture)" #formNewArquitecture="ngForm" novalidate>
          <h3>Nueva Arquitectura</h3>
            <div class="form-group">
              <label for="name">Nombre</label>
              <input type="text" class="form-control" name="name"  aria-describedby="nameHelp" placeholder="Nombre"  
                    #name="ngModel"
                    [(ngModel)]="arquitectureTest.name"
                    ngModel 
                    required>
              <small *ngIf="name.errors?.required" id="nameHelp" class="form-text text-muted">Campo requerido</small>
            </div>
            <div class="form-group">
              <label for="domain">Dirección de red</label>
              <input type="text" class="form-control" name="domain"  aria-describedby="domainHelp" placeholder="xx.xx.xx.xx" 
                    #domain="ngModel"
                    [(ngModel)]="arquitectureTest.ipNet"
                    pattern="^(([1-9]?\d|1\d\d|2[0-5][0-5]|2[0-4]\d)\.){3}([0])$"
                    ngModel 
                    required>
              <small *ngIf="domain.errors?.required" id="domainHelp" class="form-text text-muted">Campo requerido</small>
              <small *ngIf="domain.errors?.pattern" id="domainHelp" class="form-text text-muted">Formato inválido</small>
            </div>
            <div class="form-group">
                    <label for="type">Tipo</label>
                    <select class="form-control"  id="type" name="type" [(ngModel)]="arquitectureTest.type" #type="ngModel" ngModel>
                      <option value='1'>Todo en Uno</option>
                      <option value="2">Distribuido</option>
                      <option value="3">Distribuido + PSTN</option>
                    </select>
            </div>  
            <div class="form-group">
                    <label for="status">Estado</label>
                    <select class="form-control"  id="status" name="status" [(ngModel)]="arquitectureTest.status" #status="ngModel" ngModel>
                      <option value='public'>Publico</option>
                      <option value="private">Privado</option>
                      
                    </select>
            </div>
            <div class="row">

                <div class="form-group">
                        <label for="maxRAM">RAM</label>
                        <input type="number" class="form-control" name="maxRAM" [(ngModel)]="arquitectureTest.ram" aria-describedby="maxRAMHelp" placeholder="Mb" 
                              #maxRAM="ngModel"
                              pattern="^([1-9][0-9]{0,4})$"
                              ngModel   
                              required>
                        <small *ngIf="maxRAM.errors?.required" id="maxRAMHelp" class="form-text text-muted">Campo requerido</small>
                        <small *ngIf="maxRAM.errors?.pattern" id="maxRAMHelp" class="form-text text-muted">Excede el valor permitido</small>
                </div>
                <div class="form-group">
                        <label for="maxHDD">Almacenamiento</label>
                        <input type="number" class="form-control" name="maxHDD" [(ngModel)]="arquitectureTest.hdd" aria-describedby="maxHDDHelp" placeholder="Gb" 
                              #maxHDD="ngModel"
                              pattern="^([1-9][0-9]{0,2}|1000)$"
                              ngModel   
                              required>
                        <small *ngIf="maxHDD.errors?.required" id="maxHDDHelp" class="form-text text-muted">Campo requerido</small>
                        <small *ngIf="maxHDD.errors?.pattern" id="maxHDDHelp" class="form-text text-muted">Excede el valor permitido</small>
                </div>
                <div class="form-group">
                        <label for="maxCore">Procesadores</label>
                        <input type="number" class="form-control" name="maxCore" [(ngModel)]="arquitectureTest.cpu" aria-describedby="maxCoreHelp" placeholder="Gb" 
                              #maxCore="ngModel"
                              pattern="^([0-9]{0,2})$"
                              ngModel   
                              required>
                        <small *ngIf="maxCore.errors?.required" id="maxCoreHelp" class="form-text text-muted">Campo requerido</small>
                        <small *ngIf="maxCore.errors?.pattern" id="maxCoreHelp" class="form-text text-muted">Excede el valor permitido</small>
                </div>
                <div class="form-group">
                        <label for="maxVM">VM Adicionales</label>
                        <input type="number" class="form-control" name="maxVM" [(ngModel)]="arquitectureTest.vms" aria-describedby="maxVMHelp" placeholder="Gb" 
                              #maxVM="ngModel"
                              pattern="^([0-9]{0,2})$"
                              ngModel   
                              required>
                        <small *ngIf="maxVM.errors?.required" id="maxVMHelp" class="form-text text-muted">Campo requerido</small>
                        <small *ngIf="maxVM.errors?.pattern" id="maxVMHelp" class="form-text text-muted">Excede el valor permitido</small>
                </div>
               
            </div>
            <button  [disabled]="!formNewArquitecture.valid " type="submit" class="btn btn-primary">Crear</button>
        </form>
      </div>
    </div>
  </div> 
  <ng-template #await>
    <app-loading message="Creando Arquitectura, espere  por favor"></app-loading>
</ng-template>